<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask App - Project Reporting Form</title>

    <!-- Import Materialize CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">

    <!-- Google Fonts for Typography -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Link to your custom external CSS file -->
    <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet">
</head>

<body>

    <nav>
        <div class="nav-wrapper teal">
            <a href="#" class="brand-logo center">PWD R&B Project Reporting and Monitoring System</a>
        </div>
    </nav>

    <main>
        <!-- Dynamic Form -->
        <div class="row">
            <form method="POST">
                <!-- Ensure the form is within a full-width container -->
                <div class="col s12"> <!-- Full width column for collapsible groups -->
                    <ul class="collapsible">
                        {% for group in field_groups %}
                        <li>
                            <div class="collapsible-header">
                                <i class="material-icons">info</i> {{ group.group_title }}
                            </div>
                            <div class="collapsible-body">
                                <div class="row">
                                    {% for field in group.fields %}
                                    <div class="input-field col s12 m6"> <!-- Full width on small screens, half on medium/large -->
                                        <label for="{{ field.field_name }}">{{ field.field_label }}</label>

                                        {% if field.field_type == 'text' %}
                                        <input type="text" id="{{ field.field_name }}" name="{{ field.field_name }}" 
                                               value="{{ field.field_value }}" placeholder="{{ field.ui_options.placeholder }}"
                                               {% if field.field_validation and field.field_validation.required %}required{% endif %}>

                                        {% elif field.field_type == 'number' %}
                                        <input type="number" id="{{ field.field_name }}" name="{{ field.field_name }}" 
                                               value="{{ field.field_value }}"
                                               {% if field.field_validation and field.field_validation.required %}required{% endif %}
                                               {% if field.field_validation and field.field_validation.min_value is not none %}min="{{ field.field_validation.min_value }}"{% endif %}
                                               {% if field.field_validation and field.field_validation.max_value is not none %}max="{{ field.field_validation.max_value }}"{% endif %}>

                                        {% elif field.field_type == 'select' %}
                                        <select id="{{ field.field_name }}" name="{{ field.field_name }}" class="browser-default">
                                            {% for option in field.field_options %}
                                            <option value="{{ option }}" {% if field.field_value == option %}selected{% endif %}>{{ option }}</option>
                                            {% endfor %}
                                        </select>

                                        {% elif field.field_type == 'date' %}
                                        <input type="text" class="datepicker" id="{{ field.field_name }}" name="{{ field.field_name }}" 
                                               value="{{ field.field_value }}"
                                               {% if field.field_validation and field.field_validation.required %}required{% endif %}>

                                        {% elif field.field_type == 'textarea' %}
                                        <textarea id="{{ field.field_name }}" name="{{ field.field_name }}" class="materialize-textarea" 
                                                  {% if field.field_validation and field.field_validation.required %}required{% endif %}>
                                            {{ field.field_value }}
                                        </textarea>
                                        {% endif %}

                                        <!-- Tooltip for help text -->
                                        {% if field.ui_options.help_text %}
                                        <i class="material-icons tooltipped" data-position="top" data-tooltip="{{ field.ui_options.help_text }}">help_outline</i>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>

                <!-- Submit Button -->
                <div class="row">
                    <div class="col s12 center-align">
                        <button type="submit" class="btn-large waves-effect waves-light teal">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </main>

    <footer class="page-footer teal">
        <div class="footer-copyright">
            <div class="container">
                &copy; 2024 RNB CENTRAL v2. All Rights Reserved.
            </div>
        </div>
    </footer>

    <!-- Import Materialize JavaScript and dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- Initialize Materialize Components (e.g., Datepicker) -->
    <script src="{{ url_for('static', filename='js/form-scripts.js') }}"></script>
</body>

</html>
